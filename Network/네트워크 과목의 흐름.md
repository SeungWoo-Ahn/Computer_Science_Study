# 네트워크 과목의 흐름

내가 느낀 네트워크 파트는 '다른 컴퓨터와 데이터를 송수신하기 위해 사용되는 네트워크의 
각 계층별 역할과 사용되는 네트워크 기기'를 공부하는 것이다.

`인터넷 프로토콜 스위츠(internet protocol suite)`는 인터넷에서 컴퓨터들이 서로 정보를 주고받는 데 쓰이는 프로토콜의 집합이다.
이를 `TCP/IP 4계층 모델` 혹은 `OSI 7계층`으로 설명한다.
주로 다룰 `TCP/IP 4계층 모델`은 네트워크에서 사용되는 통신 프로토콜의 집합으로
프로토콜의 네트워킹 범위에 따라 네 개의 추상화 계층으로 구성된다.

네트워크 계층마다 사용되는 프로토콜의 종류와 특징, 사용되는 네트워크 기기들을 계층별로 정리할 것이다.

<br>

## 네트워크는 무엇인가

네트워크는 `노드 (node)`와 `링크 (link)`가 서로 연결되어 있으며 리소스를 공유하는 집합이다.
여기서 `노드`의 예시로는 서버, 라우터, 스위치 등 네트워크 장치가 있으며,
`링크`의 예시로는 유선 또는 무선 연결을 뜻한다.

네트워크 용어 중에 링크 내에서 성공적으로 전달된 데이터의 양인 `처리량(throught)`이 있다.
처리량의 단위는 bps(bit per second)이며, 트래픽, 대역폭, 네트워크 중간에 발생하는 에러, 그리고 장치의 하드웨어 스펙에 영향을 받는다.
`트래픽`은 특정 시점에 링크 내에 흐르는 데이터의 양을 말하고,
`대역폭`은 주어진 시간 동안 네트워크 연결을 통해 흐를 수 있는 최대 비트 수이다.
또 다른 용어인 `지연 시간 (latency)`는 어떤 메세지가 두 장치 사이를 왕복하는데 걸린 시간이다.

네트워크의 노드와 링크가 어떻게 배치되었는지에 대한 방식을 `네트워크 토폴로지`라 한다.
대표적으로 5가지의 네트워크 토폴로지가 있는데,
`트리형`은 트리 형태로 노드와 링크가 연결된 방식이다. 
장점으로는 노드의 추가와 삭제가 쉽지만
단점으로는 트래픽이 집중될 때 트리 형태이기 때문에 하위 노드에 영향을 끼친다.
`버스형`은 중앙 통신 회선 하나에 여러 개의 노드가 연결되어 공유하는 방식이다.
근거리 통신망(LAN)에서 사용되며 장점으로는 설치 비용이 적고 신뢰성이 우수하다. 
또 노드의 추가와 삭제가 쉽다.
하지만 단점으로는 스푸핑이 가능한 문제가 있다.
스푸핑이란 LAN 상에서 송신과 관련 없는 다른 호스트에 가지 않도록 하는 스위칭 기능을 마비시키거나 속여서
송신부의 패킷을 특정 노드에 오도록 처리하는 것이다.
`스타형`은 중앙에 있는 노드에 별처럼 모든 노드가 연결된 방식이다.
장점으로는 노드의 추가, 에러 탐지가 쉽고 패킷 충돌 발생 가능성이 적지만
단점으로는 중앙 노드에 장애가 발생하면 전체 네트워크 사용이 불가능하고 설치 비용이 비싸다.
`링형`은 노드가 고리 모양으로 연결된 방식이다.
장점으로는 노드 수가 증가되어도 네트워크상의 손실이 거의 없고, 충돌 발생 가능성이 적고 고장을 쉽게 발견한다.
단점으로는 네트워크 구성이 어렵고 회선에 장애가 발생하면 전체 네트워크에 영향을 끼친다.
`메시형`은 노드가 그물망처럼 연결된 방식이다.
장점으로는 한 노드에 장애가 발생해도 네트워크를 계속 사용할 수 있고 트래픽 분산 처리가 가능하다.
단점으로는 노드의 추가가 어렵고 구축 비용과 운영 비용이 비싸다.

네트워크 상태를 확인하는 대표적인 명령어 4개가 있다.
`ping`은 네트워크 상태를 확인하려는 대상 노드를 향해 일정 크기의 패킷을 전송하는 명령어다.
패킷 수신 상태와 도달하기까지의 시간 등을 확인할 수 있다.
참고로 TCP/IP 프로토콜 중 ICMP 프로토콜을 통해 동작한다.
`netstat`은 접속되어 있는 서비스들의 네트워크 상태를 표시하는 명령어다.
주로 서비스의 포트가 열려 있는지 확인할 때 사용된다.
`nslookup`은 DNS에 관련된 내용을 확인하는 명령어다.
특정 도메인에 매핑된 ip를 확인할 때 사용한다.
`tracert`는 목적지 노드까지 네트워크 경로를 확인하는 명령어다.
어느 구간에서 응답 시간이 느려지는지 등을 확인할 때 사용한다.

## TCP/IP 4계층과 OSI 7계층은

`TCP/IP 4계층`은 `어플리케이션 계층`, `전송 계층`, `인터넷 계층`, `링크 계층`으로 나눠진다.

TCP/IP 4계층을 OSI 7계층과 대응시켜보면,
`어플리케이션 계층`은 `어플리케이션, 표현, 세션 계층`과 대응되고
`전송 계층`은 똑같이 `전송 계층`과 대응된다.
`인터넷 계층`은 `네트워크 계층`과 대응되고
`링크 계층`은 `데이터 링크, 물리 계층`과 대응된다.

각 계층에는 `PDU (Protocol Data Unit)`이란 계층에서 데이터 덩어리의 단위가 있는데,
제어 관련 정보들이 포함된 `헤더`와 데이터를 의미하는 `페이로드`로 구성된다.
네트워크를 통해 데이터를 송수신할 때,
보내는 측의 제일 상위 계층인 어플리케이션부터 이 계층의 PDU인 `메세지`를 하위 계층으로 보내며 `캡슐화 과정`을 거친다.
`캡슐화 과정`은 상위 계층의 헤더와 데이터를 해당 계층의 데이터 부분에 포함시키고 해당 계층의 헤더를 삽입하는 과정이다.
최종적으로 제일 하위 계층인 물리 계층에서 비트가 되어 받는 쪽으로 전송된다.
받는 측의 제일 하위 계층인 물리 계층부터 어플리케이션 계층까지 `비캡슐화 과정`을 거치며 최종적으로 메세지가 전달된다.
`비캡슐화 과정`은 하위 계층에서 상위 계층으로 가며 각 계층의 헤더 부분을 제거하는 과정이다.
최하위 계층인 물리 계층의 PDU인 비트로 데이터를 송수신하는 것이 가장 빠르고 효율성이 좋지만
어플리케이션 계층에선 헤더에 authorization 등 다른 값들을 넣는 확장이 쉽기 때문에 문자열을 기반으로 송수신한다.

<br>