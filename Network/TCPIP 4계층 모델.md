## TCP/IP 4계층 모델

### 계층 구조

**TCP/IP 4계층 모델**

    네트워크에서 사용되는 통신 프로토콜의 집합
    
    프로토콜의 네트워킹 범위에 따라 4개의 추상화 계층으로 구성

    특정 계층이 변경됐을 때, 다른 계층이 영향을 받지 않도록 설계

<br>

**TCP/IP 4계층**

- 애플리케이션 계층
  - OSI 7계층의 `애플리케이션`, `프레젠테이션`, `세션` 계층을 통틀어 지칭
  - HTTP, SMTP, FTP, SSH, DNS


- 전송 계층
    - OSI 7계층에서도 `전송 계층`으로 표현
    - TCP, UDP


- 인터넷 계층
    - OSI 7계층에선 `네트워크 계층`으로 표현 
    - IP, ICMP


- 링크 계층
  - OSI 7계층의 `데이터 링크`, `물리` 계층을 통틀어 지칭
  - 이더넷

<br>

### 1. 애플리케이션 계층

    실질적으로 사람들에게 서비스를 제공하는 층

    - FTP: 장치 간의 '파일을 전송'하는 데 사용되는 표준 프로토콜

    - SSH: 보안되지 않는 네트워크에서 서비스를 안전하게 운영하기 위한 '암호화 프로토콜'

    - HTTP: www을 위한 데이터 통신의 기초이자 '웹 사이트'를 이용하는 데 쓰는 프로토콜

    - DNS: 도메인 이름과 IP주소를 매핑해주는 서버. 
    IP주소가 바뀌어도 사용자는 같은 도메인 주소로 접속 가능

<br>

### 2. 전송 계층

    송신자와 수신자를 연결하는 통신 서비스를 제공

    연결 지향 데이터 스트림 지원, 신뢰성, 흐름 제어를 제공

    - TCP
    1) 패킷 사이의 순서 보장
    2) 연결지향 프로토콜을 사용해 신뢰성 구축
    3) 가상회선 패킷 교환 방식 사용
    
    ※ 가상회선 패킷 교환 방식
    각 패킷에 '가상회선 식별자'가 포함
    모든 패킷을 전송하면 가상회선이 해제, 패킷들은 전송된 '순서대로' 도착

    - UDP
    1) 순서를 보장하지 않고 수신 여부를 확인하지 않음
    2) 데이터그램 패킷 교환 방식 사용

    ※ 데이터그램 패킷 교환 방식
    패킷이 '독립적으로 이동'하며 '최적의 경로'를 선택해서 이동
    따라서 전송된 순서와 도착한 순서가 '다를 수 있다'

<br>

**TCP 연결 성립 과정 3-way handshake**

용어

- `SYN`: Synchronization 의 약자, 연결 요청 플래그


- `ACK`: Acknowledgment 의 약자, 응답 플래그


- `ISN`: Initial Sequence Numbers 의 약어, 초기 네트워크 연결 시 할당된 32비트 고유 시퀀스 번호

<br>

`1. SYN 단계`

클라이언트가 서버에 '클라이언트의 ISN을 담아' `SYN`을 보냄

`ISN`은 TCP 연결의 첫 번째 패킷에 할당된 임의의 시퀀스 번호

<br>

`2. SYN + ACK 단계`

서버는 클라이언트의 SYN을 수신하고 `서버의 ISN`을 보내며

승인번호로`클라이언트의 ISN + 1`을 보냄

<br>

`3. ACK 단계`

클라이언트는 `받은 승인 번호를 ACK에 담아` 서버에 보냄

3-way handshake 과정 이후 신뢰성이 구축되고 데이터 전송을 시작

이 과정은 `TCP`엔 존재하지만 `UDP`엔 없음